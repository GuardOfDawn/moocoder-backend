<?xml version='1.0' encoding='UTF-8'?>
<flow-definition plugin="workflow-job@2.17">
    <actions>
        <org.jenkinsci.plugins.pipeline.modeldefinition.actions.DeclarativeJobAction plugin="pipeline-model-definition@1.2.7"/>
        <org.jenkinsci.plugins.pipeline.modeldefinition.actions.DeclarativeJobPropertyTrackerAction plugin="pipeline-model-definition@1.2.7">
            <jobProperties/>
            <triggers/>
            <parameters/>
        </org.jenkinsci.plugins.pipeline.modeldefinition.actions.DeclarativeJobPropertyTrackerAction>
    </actions>
    <description></description>
    <keepDependencies>false</keepDependencies>
    <properties>
        <org.jenkinsci.plugins.workflow.job.properties.PipelineTriggersJobProperty>
            <triggers>
                <com.dabsquared.gitlabjenkins.GitLabPushTrigger plugin="gitlab-plugin@1.5.3">
                    <spec></spec>
                    <triggerOnPush>true</triggerOnPush>
                    <triggerOnMergeRequest>false</triggerOnMergeRequest>
                    <triggerOnPipelineEvent>false</triggerOnPipelineEvent>
                    <triggerOnAcceptedMergeRequest>false</triggerOnAcceptedMergeRequest>
                    <triggerOnClosedMergeRequest>false</triggerOnClosedMergeRequest>
                    <triggerOnApprovedMergeRequest>false</triggerOnApprovedMergeRequest>
                    <triggerOpenMergeRequestOnPush>never</triggerOpenMergeRequestOnPush>
                    <triggerOnNoteRequest>false</triggerOnNoteRequest>
                    <noteRegex>Jenkins please retry a build</noteRegex>
                    <ciSkip>true</ciSkip>
                    <skipWorkInProgressMergeRequest>true</skipWorkInProgressMergeRequest>
                    <setBuildDescription>true</setBuildDescription>
                    <branchFilterType>All</branchFilterType>
                    <includeBranchesSpec></includeBranchesSpec>
                    <excludeBranchesSpec></excludeBranchesSpec>
                    <targetBranchRegex></targetBranchRegex>
                    <secretToken></secretToken>
                </com.dabsquared.gitlabjenkins.GitLabPushTrigger>
            </triggers>
        </org.jenkinsci.plugins.workflow.job.properties.PipelineTriggersJobProperty>
        <com.dabsquared.gitlabjenkins.connection.GitLabConnectionProperty plugin="gitlab-plugin@1.5.3">
            <gitLabConnection></gitLabConnection>
        </com.dabsquared.gitlabjenkins.connection.GitLabConnectionProperty>
    </properties>
    <definition class="org.jenkinsci.plugins.workflow.cps.CpsFlowDefinition" plugin="workflow-cps@2.45">
        <script>
            pipeline {
            agent any
            stages {
            stage(&apos;build&apos;) {
            steps {
            git credentialsId: &apos;{%CREDENTIAL%}&apos;, url: &apos;{%GIT_HOST%}/{%NAMESPACE%}/{%PROJECT%}&apos;
            }
            }
            stage(&apos;Test&apos;) {
            steps {
            sh &apos;&apos;&apos;if [ ! -d &quot;/tmp/aes/{%PROBLEM%}&quot; ]; then
            wget -P /tmp/aes {%STORAGE_HOST%}/{%PROBLEM%}.zip
            unzip /tmp/aes/{%PROBLEM%}.zip -d /tmp/aes/{%PROBLEM%}
            fi
            if [ -d &quot;/tmp/aes/{%PROBLEM%}/test&quot; ]; then
            if [ -d &quot;${WORKSPACE}/test&quot; ]; then
            rm -rf ${WORKSPACE}/test
            fi
            cp -r /tmp/aes/{%PROBLEM%}/test ${WORKSPACE}/test
            fi
            if [ -f &quot;/tmp/aes/{%PROBLEM%}/src/__init__.py&quot; ]; then
            if [ -f &quot;${WORKSPACE}/src/__init__.py&quot; ]; then
            rm -rf ${WORKSPACE}/src/__init__.py
            fi
            cp /tmp/aes/{%PROBLEM%}/src/__init__.py ${WORKSPACE}/src/__init__.py
            fi&apos;&apos;&apos;
            sh &apos;cd test&apos;
            sh &apos;nosetests --with-xunit&apos;
            }
            }
            }
            post {
            always {
            junit &apos;nosetests.xml&apos;
            sh &apos;curl -l -H &quot;Content-type: application/x-www-form-urlencoded&quot; -X POST -d &quot;buildNumber=${BUILD_NUMBER}&amp;secret={%SECRET%}&quot; {%LOCAL_HOST%}/callback/{%ID%}&apos;
            }
            }
            }
        </script>
        <sandbox>true</sandbox>
    </definition>
    <triggers/>
    <disabled>false</disabled>
</flow-definition>